(function(){window.mediaCheck=function(options){var breakpoints,checkQuery,convertEmToPx,createListener,getPXValue,hasMatchMedia,i,mmListener,mq,mqChange;if(mq=void 0,mqChange=void 0,createListener=void 0,convertEmToPx=void 0,getPXValue=void 0,hasMatchMedia=void 0!==window.matchMedia&&!!window.matchMedia("!").addListener)return mqChange=function(a,b){return a.matches?"function"==typeof b.entry&&b.entry(a):"function"==typeof b.exit&&b.exit(a),"function"==typeof b.both?b.both(a):void 0},(createListener=function(){return mq=window.matchMedia(options.media),mq.addListener(function(){return mqChange(mq,options)}),window.addEventListener("orientationchange",function(){return mq=window.matchMedia(options.media),mqChange(mq,options)},!1),mqChange(mq,options)})();breakpoints={},mqChange=function(a,b){return a.matches?"function"!=typeof b.entry||breakpoints[b.media]!==!1&&null!=breakpoints[b.media]||b.entry(a):"function"!=typeof b.exit||breakpoints[b.media]!==!0&&null!=breakpoints[b.media]||b.exit(a),"function"==typeof b.both&&b.both(a),breakpoints[b.media]=a.matches},convertEmToPx=function(a){var b,c;return b=void 0,b=document.createElement("div"),b.style.width="1em",b.style.position="absolute",document.body.appendChild(b),c=a*b.offsetWidth,document.body.removeChild(b),c},getPXValue=function(a,b){var c;switch(c=void 0,b){case"em":c=convertEmToPx(a);break;default:c=a}return c};for(i in options)breakpoints[options.media]=null;return checkQuery=function(parts){var constraint,dimension,matches,ratio,value,windowHeight,windowWidth;return constraint=parts[1],dimension=parts[2],value=parts[4]?getPXValue(parseInt(parts[3],10),parts[4]):parts[3],windowWidth=window.innerWidth||document.documentElement.clientWidth,windowHeight=window.innerHeight||document.documentElement.clientHeight,"width"===dimension?matches="max"===constraint&&value>windowWidth||"min"===constraint&&windowWidth>value:"height"===dimension?matches="max"===constraint&&value>windowHeight||"min"===constraint&&windowHeight>value:"aspect-ratio"===dimension&&(ratio=windowWidth/windowHeight,matches="max"===constraint&&eval(ratio)<eval(value)||"min"===constraint&&eval(ratio)>eval(value)),matches},mmListener=function(){var a,b,c,d,e,f;for(c=options.media.split(/\sand\s|,\s/),a=!0,e=0,f=c.length;f>e;e++)b=c[e],d=b.match(/\((.*?)-(.*?):\s([\d\/]*)(\w*)\)/),checkQuery(d)||(a=!1);return mqChange({media:options.media,matches:a},options)},window.addEventListener?window.addEventListener("resize",mmListener):window.attachEvent&&window.attachEvent("onresize",mmListener),mmListener()}}).call(this);var customSalsa={settings:{ajaxDelay:50,ajaxDefaultEvent:"salsaajax",bodyClasses:{getLocal:"lookup","supporter/unsubscribe":"unsubscribe",profile:"profile",blastContent:"blasts","/letter":"letter-to-editor","/event/":"event","/my/":"my-salsa","/shop":"shop","/signup":"signup","/tellafriend":"tellafriend","/thank_you_page":"thankyou","/questionnaire/":"questionnaire","/action3":"action","/viewCart.jsp":"shop-cart","/item.jsp":"shop-item"},activeLabelSelector:'input[type="radio"]',$inputsWithPlaceholders:jQuery("#left_container input, #credit_card_information input, .diaFields:not(.eventFields) input, .diaFields:not(.eventFields) textarea, .login input, .logincreate input, #questionnaireQuestions input, .event-page .tellafriend input, #honorof .textarea, .event-page .tellafriend textarea").not(".checkbox, .radio, :hidden"),placeholderLabelSpeed:100,placeholderHideSelectLabels:!0,mobilizeConversions:{Email:"email",In_Honor_Email:"email",Zip:"number",cc:"number",Employer_Zip:"number",Phone:"tel",Work_Phone:"tel",Cell_Phone:"tel",otheramt:"number"},mobilizeBreak:500,allowCanadianPostalCodes:!1,regex:{zip:/^\d{5}(-\d{4})?$/,canadianPostal:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z] +?[0-9][A-Z][0-9]$/i,email:/^[A-Z0-9._%-\+]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,integer:/^\d+$/,decimal:/^\d+\.?\d*$/},lightboxDefaults:{headline:"Want your gift to have even more impact?",intro:"<p>Join our monthly giving program - and help us fight month by month for a better world.</p>",yes:"YES!",yestext:"I'll give a monthy donation of $[amount] instead",formula:"Math.ceil(amount / 5)",no:"NO, THANKS",notext:"Process my one-time gift of $[amount]",bg:"",recurring_redirect:"",validate:!1,max:500,tracking:!0},donationFormFields:{'input[name="First_Name"]':"Please enter your first name",'input[name="Last_Name"]':"Please enter your last name",'input[name="Street"]':"Please enter your street",'input[name="City"]':"Please enter your street",'select[name="State"]':"Please select your state",'input[name="Zip"]':"Please enter your Zip Code",'input[name="Email"]':"Please enter your email address",'input[name="cc"]':"Please enter a valid credit card number",'select[name="ccExpMonth"]':"Please choose an expiration month",'select[name="ccExpYear"]':"Please choose an expiration year",'input[name="CVV2"]':"Please enter a valid card security code"}},status:{initJQ:!1,addBodyClass:!1},initJQ:function(a){a="undefined"!=typeof a?a:"1.11.2",document.write('<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/'+a+'/jquery.min.js"></script>'),document.write("<script>window.jQ = jQuery.noConflict( true );</script>"),customSalsa.status.initJQ=!0},watchAJAX:function(){var a=this.settings.ajaxDefaultEvent;jQ(document).ajaxSuccess(function(b,c,d){-1!==d.url.indexOf("actionJSON.sjs")?a="actionloaded":-1!==d.url.indexOf("targetJSON.sjs")?a="targetsloaded":-1!==d.url.indexOf("processAction2.jsp")?a="actionprocessed":-1!==d.url.indexOf("blind_submit.sjs")&&(a="actionsubmitted blindactionsubmitted"),setTimeout(jQ(document).trigger(a),this.settings.ajaxDelay)}),jQ("form[action*='blind_submit.sjs']").length&&jQ(document).trigger("actionloaded")},addBodyClass:function(a){var b=window.location.pathname,c=null;a="undefined"!=typeof a?a:this.settings.bodyClasses,jQ.each(a,function(a,d){return b.indexOf(a)>1?(jQ("body").addClass(d),c=d,!1):void 0}),"action"===c&&($form=jQ("form[onsubmit]"),$form.length&&$form.attr("action").indexOf("blind_submit")>1?jQ("body").addClass("action-blind"):jQ("#sign-page").is(":visible")?jQ("body").addClass(jQ(".petitionContent").length?"action-petition":"action-targeted-or-multi"):jQ(document).ajaxSuccess(function(a,b,c){-1!==c.url.indexOf("actionJSON.sjs")&&jQ("body").addClass(b.response.indexOf('"Style":"Targeted"')>1?"action-targeted":b.response.indexOf('"Style":"Petition"')>1?"action-petition":b.response.indexOf('"Style":"Multi-Content"')>1?"action-multi":"action-unknown")})),customSalsa.status.addBodyClass=!0},activeLabels:function(a){a="undefined"!=typeof a?a:this.settings.activeLabelSelector,jQ(this.settings.activeLabelSelector).each(function(){var a=jQ(this),b=jQ("label[for='"+this.id+"']"),c=jQ(this).attr("name");b.addClass("active-label group-"+c),b.addClass(a.prop("checked")?"checked":"unchecked"),jQ("input[name='"+c+"']").on("change",function(){jQ("label.group-"+c).removeClass("checked").addClass("unchecked"),jQ("label[for='"+this.id+"']").addClass("checked")})})},placeholderLabels:function(a){a="undefined"!=typeof a?a:100,this.settings.$inputsWithPlaceholders.siblings("label").addClass("placeholder").siblings("input, textarea").addClass("with-placeholder"),jQ(".with-placeholder").focus(function(){""!==jQ(this).val()?jQ(this).siblings(".placeholder:visible").fadeTo(a,0):jQ(this).siblings(".placeholder:visible").fadeTo(a,.2)}).keyup(function(){""!==jQ(this).val()?jQ(this).siblings(".placeholder:visible").fadeOut(a,0):jQ(this).siblings(".placeholder:hidden").fadeTo(a,.2)}).change(function(){""!==jQ(this).val()?jQ(this).siblings(".placeholder:visible").fadeOut(a,0):jQ(this).siblings(".placeholder:hidden").fadeTo(a,.2)}).blur(function(){""===jQ(this).val()&&jQ(this).siblings(".placeholder").fadeTo(a,1)}),jQ(".with-placeholder").each(function(a){""!==jQ(this).val()&&jQ(this).trigger("change")}),this.settings.placeholderHideSelectLabels&&this.hideSelectLabels()},hideSelectLabels:function(){jQ(".formRow select").each(function(){$(this).closest(".formRow").find("label").addClass("hidden")})},addCSSHelpers:function(){jQ("#CVV2").parents(".formRow").addClass("cvv-field"),jQ("#ccExpMonth").parents(".formRow").addClass("expires-field"),$("span.required").parent("label").next("input, select").attr("required","required"),customSalsa.status.addCSSHelpers=!0},addMissingInputTypes:function(a){arguments.length||(a=jQ("input[id]").not("[type]")),jQ.each(a,function(a,b){var c=$(this).attr("id");return c?void(document.getElementById(c).type="text"):!0})},getFieldValidationType:function(a){var b;switch(a.attr("name")){case"Email":b="email";break;case"Zip":b="zip";break;case"Phone":b="phone";break;case"cc":case"CVV2":b="integer";break;default:b="empty"}return b},validateField:function(a,b){if(a=a.trim(),!a||0===a.length)return!1;if("empty"===b)return!0;if("zip"===b){var c=this.settings.regex.zip.test(a);return c?!0:this.settings.allowCanadianPostalCodes?this.settings.regex.canadianPostal.test(a):!1}return"email"===b?this.settings.regex.email.test(a):"integer"===b?this.settings.regex.integer.test(a):"decimal"===b?this.settings.regex.decimal.test(a):!0},advocacy:{validateSupporterFields:function(){var a=this.getRequiredFields(),b=!0;return jQ.each(a,function(a,c){var d=customSalsa.getFieldValidationType(c),e=customSalsa.validateField(c.val(),d);if(!e){var f="Please enter a valid value";return"email"===d?f="Please enter a valid email address":"zip"===d?f="Please enter a valid postal code":"First_Name"===c.attr("name")?f="Please enter a first name":"Last_Name"===c.attr("name")&&(f="Please enter a last name"),c.focus(),alert(f),b=!1,!1}}),b},getRequiredFields:function(){var a=[];return jQ("[required='required']").each(function(){a.push(jQ(this))}),jQ(".required").each(function(){var b=jQ(this).closest(".formRow").find("input, select");-1===jQ.inArray(b,a)&&a.push(b)}),a}},donation:{magicSetCCtype:function(a,b){var c={visa:/^4\d{15}$/,mc:/^5[1-5]\d{14}$/,amex:/^3[47]\d{13}$/,disc:/^6(?:011\d\d|5\d{4}|4[4-9]\d{3}|22(?:1(?:2[6-9]|[3-9]\d)|[2-8]\d\d|9(?:[01]\d|2[0-5])))\d{10}$/},d=!1;return a="string"!=typeof a?a:jQ("#cc_number").val(),b="string"!=typeof b?b:"#cc_type",jQ.each(c,function(c,e){return null!==a.match(e)?(d=c,jQ(b).val(c),!1):void 0}),d},isValidLuhn:function(a){var b=[0,2,4,6,8,1,3,5,7,9];return a="string"!=typeof a?a:jQ("#cc_number").val(),function(){for(var c,d=a.length,e=1,f=0;d;)c=parseInt(a.charAt(--d),10),f+=(e^=1)?b[c]:c;return f&&f%10===0}},isValidABA:function(a){var b=/^\d{9}$/,c=null;if(a=a.toString(),!b.test(a))return!1;for(var d=0;9>d;d+=3)c+=3*parseInt(a.charAt(d),10)+7*parseInt(a.charAt(d+1),10)+parseInt(a.charAt(d+2),10);return 0!==c&&c%10===0?!0:!1},isValidCC:function(a,b,c){var d=c,e=/^\d+$/,f=/^\d{3}$/,g={errors:[],isValid:!0};switch(d){case"visa":e=/^4\d{15}$/;break;case"mc":e=/^5[1-5]\d{14}$/;break;case"disc":e=/^6(?:011\d\d|5\d{4}|4[4-9]\d{3}|22(?:1(?:2[6-9]|[3-9]\d)|[2-8]\d\d|9(?:[01]\d|2[0-5])))\d{10}$/;break;case"amex":case"american express":e=/^3[47]\d{13}$/,f=/^\d{4}$/}return e.test(a)&&this.isValidLuhn(a)||(g.isValid=!1,g.errors.push({value:a,message:"A valid credit card number is required."})),f.test(b)||(g.isValid=!1,g.errors.push({value:b,message:"Invalid security code (CVV) number."})),g},lightbox:{init:function(config){var lightbox=customSalsa.settings.lightboxDefaults;arguments.length&&"object"==typeof config&&jQ.extend(lightbox,config),jQ("body").addClass("not-ready").append('<div id="lightbox-mask" />'),$lightbox=$('<div id="lightbox-box" />'),$lightbox.append('<a href="#" class="close">X</a>').append("<h2>"+lightbox.headline+"</h2>").append('<div class="lightbox-intro">'+lightbox.intro+"</div>").append('<button class="yes" id="lightbox-yes">'+lightbox.yes+"<span></span></button>").append('<button class="no" id="lightbox-no">'+lightbox.no+"<span></span></button>").appendTo("body").css("background",lightbox.bg),""!==lightbox.bg&&$lightbox.css("background",lightbox.bg),jQ("body").data("recurring_redirect",lightbox.recurring_redirect),this.updateTracking("start",lightbox.tracking),jQ("#lightbox-no").click(function(){jQ("body").removeClass("not-ready"),this.updateTracking("no",lightbox.tracking),jQ('form[name="subform"]').submit()}),jQ("#lightbox-yes").click(function(){jQ('input[name="recurring"][value="1"]').prop("checked",!0),jQ("input#otheramount").prop("checked",!0),jQ('input[name="amountOther"]').val(monthly),jQ("#donation_pay_periods").val("MONT"),jQ("body").removeClass("not-ready"),this.updateTracking("yes",lightbox.tracking),jQ('form[name="subform"]').submit()}),jQ("#lightbox-box .close").click(function(){return jQ("#lightbox-mask, #lightbox-box").fadeOut("fast"),jQ("body").removeClass("not-ready").addClass("lb-closed"),!1}),jQ('.not-ready form[name="subform"]').on("submit",function(){return jQ("body").hasClass("not-ready")?lightbox.validate&&!customSalsa.donation.validateForm()?!1:1===jQ('input[name="recurring"]:checked').val()?(this.updateTracking("initial-recur",lightbox.tracking),!0):jQ('input[name="amount"]:checked').val()>=lightbox.max||jQ("#otheramount:checked").length&&jQ('input[name="amountOther"]').val()>=lightbox.max?(this.updateTracking("large",lightbox.tracking),!0):(amount=0,monthly=0,jQ("#otheramount:checked").length?amount=jQ('input[name="amountOther"]').val():amount=jQ('input[name="amount"]:checked').val(),amount=parseFloat(amount),monthly=eval(lightbox.formula),monthly<3&&(monthly=2),$("#lightbox-yes span").html(lightbox.yestext.replace("[amount]",monthly)),$("#lightbox-no span").html(lightbox.notext.replace("[amount]",amount)),jQ("#lightbox-box").outerHeight()+150<jQ(window).height()?jQ("#lightbox-box").css("top",$(window).scrollTop()+150):jQ("#lightbox-box").css("top",$(window).scrollTop()+15),jQ("#lightbox-mask:hidden, #lightbox-box:hidden").fadeIn("fast"),this.updateTracking("open",lightbox.tracking),!1):(jQ("body").hasClass("lb-closed")&&this.updateTracking("closed"),!0)})},updateTracking:function(a,b){if(!do_tracking||"undefined"==typeof _gaq)return!1;0===jQ("#salsa-tracker").length&&jQ('<input type="hidden" name="Donation_Tracking_Code" value="recurring_lightbox_page" id="salsa-tracker" />').appendTo(jQ('form[name="subform"]'));var c=$("#salsa-tracker");switch(a){case"start":c.val("recurring_lightbox_present");break;case"initial-recur":c.val("recurring_prechecked"),jQ("body").data("recurring_redirect")&&jQ('input[name="redirect"]').val(jQ("body").data("recurring_redirect"));break;case"open":_gaq.push(["_trackEvent","Donations","Lightbox Open"]),c.val("recurring_lightbox_open");break;case"closed":_gaq.push(["_trackEvent","Donations","Lightbox Closed"]),c.val("recurring_lightbox_closed");break;case"large":_gaq.push(["_trackEvent","Donations","Lightbox Bypassed (Large Gift)"]),c.val("recurring_lightbox_bypassed_large");break;case"yes":_gaq.push(["_trackEvent","Donations","Lightbox Yes"]),c.val("recurring_lightbox_yes").attr("name","Note"),jQ("body").data("recurring_redirect")&&jQ('input[name="redirect"]').val(jQ("body").data("recurring_redirect"));break;case"no":_gaq.push(["_trackEvent","Donations","Lightbox No"]),c.val("recurring_lightbox_no")}}},validateForm:function(a){a="object"!=typeof a?jQ('form[name="subform"]'):a;var b=customSalsa.settings.donationFormFields;return jQ.each(b,function(b,c){var d=jQ(b,a),e=customSalsa.getFieldValidationType(d),f=customSalsa.validateField(d,e);return f?void 0:(d.filter(":visible").focus(),alert(c),wasValid=!1,!1)}),wasValid?(checkCC=this.isValidCC(jQ('input[name="cc"]',a).val(),jQ('input[name="CVV2"]',a).val(),$('input[name="cc_type"]:checked').val()),checkCC.isValid?!0:(alert(checkCC.errors.message),jQ('input[name="CVV2"]',a).val()===checkCC.errors.value?jQ('input[name="CVV2"]:visible',a).focus():jQ('input[name="cc"]:visible',a).focus(),!1)):!1}},mobilizr:{mobilizeInputTypes:function(a,b){return b="object"!=typeof b?b:customSalsa.settings.mobilizeConversions,a="number"!=typeof a?a:customSalsa.settings.mobilizeBreak,"function"!=typeof mediaCheck?!1:void mediaCheck({media:"(max-width: "+a+"px)",entry:function(){jQ.each(b,function(a,b){var c=jQ("input[name='"+a+"']");if(c.length&&c.attr("id")){var d=c.attr("id");c.data("original-type",document.getElementById(d).type),document.getElementById(d).type=b}})},exit:function(){jQ.each(b.conversions,function(a,b){var c=jQ("input[name='"+a+"']");if(c.length&&c.attr("id")&&c.data("original-type")){var d=c.attr("id");document.getElementById(d).type=c.data("original-type")}})}})},init:function(a){customSalsa.addCSSHelpers(),customSalsa.addMissingInputTypes(),this.mobilizeInputTypes(a),jQ("html").addClass("mobilized"),customSalsa.status.mobilizrInit=!0}}};"object"!=typeof jQ&&"string"!=typeof jQ.fn.jquery&&customSalsa.initJQ();